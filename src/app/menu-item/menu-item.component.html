<div class="card">
    <img [src]="imageSrc" [alt]="title">
    <div class="card-body">
        <h3 class="card-title">{{ title }}</h3>
        <p class="card-price">{{ '$' + (price | number:'1.2-2') }}</p>
        <button class="add-to-cart" (click)="addToCart()">Add to Cart</button>
    </div>
</div>

<ng-template #addToCartDialog let-dialogRef="dialogRef">
    <div class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50">
        <div class="flex flex-col w-full max-w-2xl bg-white rounded-lg shadow-2xl transform animate-scale-in relative">
            <!-- Header -->
            <h2 class="text-2xl font-bold text-white text-center p-5 bg-red-600 rounded-t-lg font-poppins">
                Add Item to Cart
            </h2>

            <!-- Content -->
            <div class="flex flex-col sm:flex-row gap-6 p-6">
                <!-- Image -->
                <div class="w-[250px] h-[250px] flex-shrink-0">
                    <img
                            [src]="imageSrc"
                            [alt]="title"
                            class="w-full h-full object-cover rounded-lg shadow-md"
                    >
                </div>

                <!-- Information -->
                <div class="flex-grow">
                    <h3 class="text-3xl font-bold text-gray-800 mb-3 font-poppins">{{ title }}</h3>
                    <p class="text-lg text-gray-600 font-medium mb-5 font-poppins">Price: {{ '$' + (price | number:'1.2-2') }}</p>

                    <div class="mb-5">
                        <label class="block font-semibold text-gray-800 mb-2 font-poppins">Quantity</label>
                        <input
                                type="number"
                                [(ngModel)]="dialogQuantity"
                                min="1"
                                class="w-full p-3 border border-gray-300 rounded-lg focus:border-red-500 outline-none font-poppins"
                        >
                    </div>

                    <!-- Conditional Inputs -->
                    <div *ngIf="itemType === 'drink'" class="mb-5">
                        <label class="block font-semibold text-gray-800 mb-2 font-poppins">Sugar Level</label>
                        <select
                                [(ngModel)]="dialogSugarLevel"
                                class="w-full p-3 border border-gray-300 rounded-lg focus:border-red-500 outline-none font-poppins"
                        >
                            <option value="0%">0%</option>
                            <option value="25%">25%</option>
                            <option value="50%">50%</option>
                            <option value="75%">75%</option>
                            <option value="100%">100%</option>
                        </select>
                    </div>

                    <div *ngIf="itemType === 'drink'" class="mb-5">
                        <label class="block font-semibold text-gray-800 mb-2 font-poppins">Ice Level</label>
                        <select
                                [(ngModel)]="dialogIceLevel"
                                class="w-full p-3 border border-gray-300 rounded-lg focus:border-red-500 outline-none font-poppins"
                        >
                            <option value="0%">0%</option>
                            <option value="25%">25%</option>
                            <option value="50%">50%</option>
                            <option value="75%">75%</option>
                            <option value="100%">100%</option>
                        </select>
                    </div>

                    <div *ngIf="itemType === 'main'" class="mb-5">
                        <label class="block font-semibold text-gray-800 mb-2 font-poppins">Spice Level</label>
                        <select
                                [(ngModel)]="dialogSpiceLevel"
                                class="w-full p-3 border border-gray-300 rounded-lg focus:border-red-500 outline-none font-poppins"
                        >
                            <option value="0%">0%</option>
                            <option value="25%">25%</option>
                            <option value="50%">50%</option>
                            <option value="75%">75%</option>
                            <option value="100%">100%</option>
                        </select>
                    </div>

                    <div *ngIf="itemType === 'soup'" class="mb-5">
                        <label class="block font-semibold text-gray-800 mb-2 font-poppins">Spice Level</label>
                        <select
                                [(ngModel)]="dialogSpiceLevel"
                                class="w-full p-3 border border-gray-300 rounded-lg focus:border-red-500 outline-none font-poppins"
                        >
                            <option value="0%">0%</option>
                            <option value="25%">25%</option>
                            <option value="50%">50%</option>
                            <option value="75%">75%</option>
                            <option value="100%">100%</option>
                        </select>
                    </div>

                    <div *ngIf="itemType === 'soup'" class="mb-5">
                        <label class="block font-semibold text-gray-800 mb-2 font-poppins">Soup Type</label>
                        <select
                                [(ngModel)]="dialogSoupType"
                                class="w-full p-3 border border-gray-300 rounded-lg focus:border-red-500 outline-none font-poppins"
                        >
                            <option value="sichuan_spicy">Sichuan Spicy Broth</option>
                            <option value="chongqing_spicy">Chongqing Spicy Broth</option>
                            <option value="milky_broth">Milky Mala Broth</option>
                            <option value="tomato">Tomato Broth</option>
                            <option value="wild_mushroom">Wild Mushroom Broth</option>

                        </select>
                    </div>
                </div>
            </div>

            <!-- Special Instructions -->
            <div class="p-6 pt-0">
                <label class="block font-semibold text-gray-800 mb-2 font-poppins">Special Instructions</label>
                <textarea
                        [(ngModel)]="dialogSpecialInstructions"
                        placeholder="Any special requests?"
                        class="w-full h-[150px] p-3 border border-gray-300 rounded-lg focus:border-red-500 outline-none font-poppins"
                ></textarea>
            </div>

            <!-- Footer -->
            <div class="flex justify-end gap-3 px-6 py-4 border-t border-gray-200">
                <button
                        (click)="dialogRef.close()"
                        class="px-5 py-2 text-sm bg-gray-200 text-gray-800 rounded-lg transition-colors hover:bg-gray-300 font-poppins"
                >
                    Cancel
                </button>
                <button
                        (click)="onAddToCart(dialogRef)"
                        [disabled]="dialogQuantity < 1"
                        class="px-5 py-2 text-sm bg-red-600 text-white rounded-lg transition-colors hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed font-poppins"
                >
                    Add to Cart
                </button>
            </div>
        </div>
    </div>
</ng-template>
